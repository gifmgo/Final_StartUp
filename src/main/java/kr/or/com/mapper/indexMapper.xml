<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.com.index.IndexDAO">
	<select id="index_selectPresidentTalk" resultType="kr.or.com.President.PresidentTalk_DTO">
		<![CDATA[
			select PresidentTalk_seq, empNm, polyNm, color, nickName, title, comments, to_char(writeDate, 'YYYY/MM/DD') as writeDate, pw, loginPw, rownum 
			from tbl_presidentTalk 
	    	where rownum <=5
			order by PresidentTalk_seq desc
		]]>
	</select>
	
	<!--토론하기 리스트 가져오는 것 -->
	<select id="index_listdebateDTO" resultType="kr.or.com.debate.debateDTO">
		<![CDATA[
			select choose, nickName, title, to_char(writeDate, 'YYYY/MM/DD') as writeDate, rownum
			from debate
			where Debateword = #{keyword} and rownum<=5
		]]>
	</select>
	
	<!-- 토론하기 키워드 가져옴 -->
	<select id="index_selectKeyWord" resultType="String">
		select admin_debate_debateword from adminDebate a where a.no=(select max(no) from adminDebate b)
	</select>

	<!-- 오늘의 이슈 -->
	<select id="index_selectIssue" resultType="kr.or.com.FreeBoard.FreeBoardDTO">
		<![CDATA[
		select no, title,  to_char(regdate, 'YYYY/MM/DD') as regdate, rownum
  		from tbl_board
  		where category = '오늘의 이슈' and rownum <= 5
  		]]>
	</select>
	
	<select id="index_selectJungChi" resultType="kr.or.com.FreeBoard.FreeBoardDTO">
		<![CDATA[
		select no, title,  to_char(regdate, 'YYYY/MM/DD') as regdate, rownum
  		from tbl_board
  		where category = '정치게시판' and rownum <= 5
		]]>
	</select>
	
	<select id="index_selectNotice" resultType="kr.or.com.FreeBoard.FreeBoardDTO">
		<![CDATA[
		select no, title,  to_char(regdate, 'YYYY/MM/DD') as regdate, rownum
  		from tbl_board
  		where category = '공지사항' and rownum <= 5
		]]>
	</select>
	
	<select id="index_selectPoint" resultType="kr.or.com.Member.MemberDTO">
		<![CDATA[
		select id, nickName, point, rank
		from (select  id, nickName, point,  RANK() OVER(ORDER BY point desc) as rank from member)
		where rownum <= 5
		]]>
	</select>
	
	<select id="index_selectPaliament" resultType="kr.or.com.Paliament_DTO.PaliamentList_DTO">
		<![CDATA[
		select *
		from (select deptcd, num2,jpgLink, empnm,pointCount, RANK() OVER(ORDER BY pointCount desc) as rank from tbl_paliament)
		where rownum <= 5
		]]>
	</select>
	
</mapper>