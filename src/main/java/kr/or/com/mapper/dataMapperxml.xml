<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.com.admin.AdminDAO">
	<select id="todayList" resultType="kr.or.com.data.TodayUserDTO">
		select * from todayuser
	</select>
	
	<insert id="insertTodayUser" parameterType="kr.or.com.data.TodayUserDTO">
		insert into todayuser(adate, todaytotaluser, totaluser) values(to_date(sysdate, 'YYYYMMDD'), 1, 1)
	</insert>
	
	<update id="updateTodayUser" parameterType="kr.or.com.data.TodayUserDTO">
		update todayuser set todayTotalUser= NVL(todayTotalUser, 0)+1 where adate = to_date(sysdate, 'YYYYMMDD')
	</update>

	<update id="updateTotalUser" parameterType="kr.or.com.data.TodayUserDTO">
		update todayuser set totalUser= NVL(select totalUser from todayuser, 0)+NVL(todayTotalUser, 0) where adate = to_date(sysdate, 'YYYYMMDD')
	</update>
	
	<update id="update" parameterType="kr.or.com.Paliament_DTO.PaliamentList_DTO">
		update TBL_PALIAMENT
		set deptCd = #{deptCd}, empNm = #{empNm}, jpgLink = #{jpgLink}, num2 = #{num2}, origNm=#{origNm}, reeleGbnNm=#{reeleGbnNm},
		    assemEmail = #{assemEmail}, assemHomep=#{assemHomep}, assemTel=#{assemTel}, electionNum=#{electionNum}, polyNm=#{polyNm},
		    shrtNm = #{shrtNm}
		where deptCd = #{deptCd}    			  
	</update>
	
	<delete id="deleteTodayUser" parameterType="kr.or.com.data.TodayUserDTO">
		delete todayuser where adate = #{adate}
	</delete>

</mapper>